# 数据分析指标与平台

## 一、数据分析指标与平台

### 1.1、互联网产品指标思路

**1）. 有多少访客，访客有什么特征？**  
访客特征：访客访问的时间段、在哪些地域访问、用什么设备以及用什么网

**2）. 访客从哪些渠道获取，效果怎么样？**  
基本思路：带来多少新访客、浏览深度怎么样、是否留存下来了以及转化率情况。  
Web 网站：新访客占比（代表渠道拓展用户的能力）、跳出率、浏览页面数、以及转化率。  
移动应用：新设备占比、次日留存率以及转化率

**3）. 访客的参与深度如何？**  
跳出率、浏览页面数、转化率

**4）. 这些访客最终有没有转化，转化漏斗是否顺畅？**  
任何有意义的动作都可以认为是转化

**5）. 移动应用主要指标也是一个用户分析的基本框架**

**6）. 获取指标的方式**

### 1.2、Web网站数据指标

#### 1.2.1、网站分析工具

**1）、免费的网站排名工具**  
Alexa、中国网站排名、网络媒体排名

**2）、免费的网站监测工具**  
Google Analytics、百度统计、CNZZ 网站分析

#### 1.2.2、几个关键的指标

**访问量**  
什么是访问？一次访问就是指一个人来到网站，然后浏览了一些内容之后离开网站的过程；这个过程也会被称为会话，也就是 session。  
访问量定义：一段时间的访问量就是这段时间内的会话次数

**访客数**  
也称为独立访客数（Unique Visitor，缩写 UV），就是访问网站的人数。  
如何识别一个用户？在网站分析系统中，会依据用户的浏览器、设备型号等信息，为用户分配一个编号，这个编号称为 Cookie。  
访客数就是访问网站的 cookie 数。如果同一人换了浏览器或设备访问网站，那么它的 cookie 也就变化了。

**浏览量**  
常被称为 PV \(PageViews），就是浏览页面的数量。

**跳出率**  
跳出率是非常重要的指标。  
常用的算法是网站的所有会话当中，来到网站之的后没有任何动作就离开的比例，等于只访问了落地页面的访问量除以总访问量。

**页面停留时长**  
访客-次访问在某个页面上停留的时间，等于这个页面的总停留时长除以这个页面的访问量。  
网站停留时长  
访客一次会话的时间长度，等于网站所量的总停留时长除以访问量。

**退出率**  
退出率衡量从某个退出网站的比例，它等于从一个页面的退出次数除以访问次数。  
页面的跳出率和退出率的区别？  
退出率是指无论从哪个页面进入网站，最终从这个页面退出的比例；跳出率是指从这个页面进入网站，没有做任何事，就从这个页面退出的比例。

**转化率**  
达到达成某种目标的访问量除以总的访问量，或达成目标的访客数占总访客的比例  
采用访问量还是访客数作为分母？  
如果将访问量作为分母，意味着将每次访问都认为是下单或购买的机会；如果将访客数作为分母，则会认为一个访客在购买之前，多次访问是正常的。

#### 1.2.3、网站监测工具-Google Analytics

包含 4 个主要模块：  
受众群体：描述用户特征  
流量获取：描述用户从哪里来  
用户行为：用户的参与情况  
用户转化：用户的达成目标情况  
更多使用：  
[《Google Analytics\(GA\)--谷歌分析在iOS系统中的应用》](https://www.jianshu.com/p/aa67bd75da34)

### 1.3、移动应用数据指标

#### 1.3.1 数据获取工具

| 国外分析工具 | Flurry Google Analytics |
| :--- | :--- |
| 国内分析工具 | 友盟 TalkingData |
| Crash分析工具 | Crashlytics |

#### 1.3.2 关键指标

| 用户获取 | 下载量 安装激活量 激活率 新增用户数 用户获取成本 |
| :--- | :--- |
| 用户活跃与参与 | **数量指标** 日活跃用户数 月活跃用户数  **质量指标** 活跃系数 它等于：活跃用户数 / 月活跃用户数 平均使用时长 功能使用率 使用某功能的用户数占活跃用户数的比例 |
| 用户留存率 | 次日留存率 7日留存率 30日留存率 |
| 用户转化 | -付费用户比例 付费用户占免费用户的比例，建议将付费用户和免费用户区别对待，因为他们在行为上差异挺大的。 -首次付费时间 用户激活多久后才会开始付费。 -用户平均每月营收 一个月的收入除以月活跃用户数 -付费用户平均每月营收 一个月的收入除以月付费用户数 |
| 获取收入 | 收入金额 付费人数 |

#### 1.3..3 版本迭代时，如何利用以上指标去评估版本迭代的效果？

注：在利用指标去评估版本迭代的效果时，尽量使用新用户的数据，因为老用户会存在忠诚度等因素影响数据。  
我们在评估新版本的迭代的效果时，可以看以下几个数据指标：

·新用户的留存率 新版本发布后，新版本发布前14天内的新用户次日留存率。 留存数据整体提高，表明移动端版本迭代的效果较好。

·核心功能的使用率 同比：旧版本发布后14天 环比：新版本发布前14天 通过同比和环比14天的数据观察核心功能的使用率是否有提升。

·新功能的使用率，继续使用率和新功能的核心贡献 在新的版本中，增加了功能A  
 需要查看功能A的使用率  
 功能A的继续使用率  
 功能A的核心贡献：使用过功能A的听歌人数比例 - 未使用过功能A的听歌人数比例

通过观察以上指标基本上就可以大概的判断这个版本改版的效果了。

### 1.4、电商类数据指标

#### 1.4.1 关键指标名词解释

| 销售额 | 这里是指电商网站的收入，这是电商网站最重要的指标。由于移动互联网的崛起，这里还需要统计下移动端占比。 |
| :--- | :--- |
| 购买客户数（按照账号去重计算） | -老客户数 当天之前就购买过商品的用户数，表示网站的粘性 -新客户数 统计当天首次购买的用户数，表示网站客户增长速率 |
| 客单价 | 每个客户购买的金额，等于销售额/购买客户数 |
| 购买转化率 | 访客中购买了商品的比例，等于购买客户数/访客数 |
| UV 访客数 | 来到网店的人数 |
| 详情页UV | 访问商品详情页的人数 |
| 订单数 | 订单数关系到支付压力和仓库发货的任务量 |
| 妥投及时率 | 妥投到客户的订单中，按照约定时间妥投的比例，它是个非常重要的用户体验指标。现在京东的一个很好的优势就在于它的物流。 |
| 重点商品缺货率 | 爆款缺货的比例。有时候用户想购买的物品缺货，容易导致客户的流失。 |

#### 1.4.2 如何将销售额和其他的数据关联起来，辅助我们去发现问题？

我们前面说到，销售额是电商网站中最关键的指标，没有之一。 销售额 = UV 转化率 客单价 那我们接下来一个一个的分析这三个因素  
**1）. 流量变化的因素**  
分析流量的变化就需要从流量的来源上来入手。  
分析思路大致是，先按照终端细分，先看下PC端、App端、Wap端分别变化了多少，然后在细分对应的终端流量是从哪里来的。PC端和Wap端可以细分到媒体，App端又分Android端和iOS端，Android端可以从渠道包中来区分来源，iOS端可以用一些跟踪工具或者IDFA来跟踪。 具体可以看下图：  
![](https://cdn.nlark.com/yuque/0/2019/png/120638/1554979230644-44014e30-ef50-4c3b-ac5e-b9c6a94c75ef.png#align=left&display=inline&height=242&originHeight=359&originWidth=633&size=0&status=done&width=426)  
流量分析  
![](https://cdn.nlark.com/yuque/0/2019/png/120638/1554979239048-984633d7-6267-4aad-b1a6-5fb5b3fa69ae.png#align=left&display=inline&height=204&originHeight=382&originWidth=668&size=0&status=done&width=356)

**2）. 客单价变化的原因 下面我们来看下客单价的公式**

```text
客单价 = 人均购买件数 * 件单价
```

人均购买件数是指每个客户购买几件商品，这个指标也经常用来衡量关联销售的效果，也就是关联销售效果越好，人均购买件数就会越多。

件单价是指商品的平均价格，等于销售额除以销售量，这个指标用来衡量网站上的商品价格高低。  
客单价的变化经常会与促销活动有关系。如下图：  
![](https://cdn.nlark.com/yuque/0/2019/png/120638/1554979200069-c5cca558-a1f2-4fe9-b442-7a077742fc50.png#align=left&display=inline&height=190&originHeight=286&originWidth=566&size=0&status=done&width=377)

**3）.转换率增长因素 - 转化漏斗**  
正所谓一图胜千言，看下面这张图大家应该就可以明白了。  
![](https://cdn.nlark.com/yuque/0/2019/png/120638/1554979161495-583e45e3-581e-41c9-8aa7-97043c2720d3.png#align=left&display=inline&height=212&originHeight=346&originWidth=694&size=0&status=done&width=425) 

### 1.5、用户生成内容\(UGC\)类数据指标

#### 1.5.1、UGC 产品的特征

目标：让用户产出内容

```text
发表文章
点赞
订阅
评论
其它行为（分享）
```

#### 1.5.2、UGC 产品的参与度（指标）

-访客数

-停留时长

-产出内容（点赞、评论、发表文章等）

```text
转发微博、发表微博
朋友圈发表状态
发表博客
```

#### 1.5.2、如何筛选优质内容

首先我们要对优质内容建一个评分模型，比如微博的优质内容模型为：

```text
热度 = 转发 + 评论 + 点赞
```

然后可以对各个指标定义下所占比例，这样就可以凭借热度这个指标去筛选优质内容了。 

## 二、搭建自己的数据分析平台

### 2.1、[MATOMO](https://matomo.org/download/)搭建自己的网站统计系统\(PIWIK\)

搭建参考：[https://www.zhujibiji.com/2018/06/matomo-builds-its-own-statistics-system-piwik/](https://www.zhujibiji.com/2018/06/matomo-builds-its-own-statistics-system-piwik/)

### 2.2、使用

[https://www.cnblogs.com/heioray/p/9732475.html](https://www.cnblogs.com/heioray/p/9732475.html)  
[https://www.cnblogs.com/cynleely/p/8064996.html](https://www.cnblogs.com/cynleely/p/8064996.html)  
[https://blog.csdn.net/dakache11/article/details/88075279](https://blog.csdn.net/dakache11/article/details/88075279)

#### 2.3、Matomo API接口概述

API可以让我们对数据进行自定义的研究。依据数据分析的需求，可以开发出更智能的数据展示平台。

Matomo（之前叫Piwik）有两大类接口：

```text
分析数据接口：用于获取Matomo的所有报表、管理（增加/更新/删除）站点/用户/权限/邮件报表等

追踪接口：使用JavaScript或者其他语言为matomo提供数据。
```

你可以通过调用Matomo的分析接口将数据集成到其他应用中去。这些数据包括访问数，页面网址、网页标题、用户设置、搜索引擎、关键词、推荐网站、用户浏览器等。并且你可以通过特定网站、日期进行筛选或按照日/周/月/年进行汇总。你获取的数据格式可以是xml格式、csv格式、json格式、excel格式等。在使用Matomo的时候，你可以将任意报表的数据进行导出，操作很简单，只需要点击“导出”小图标。

Matomo也提供了站点、用户、用户权限、目标、PDF报表方面的接口，可以创建、编辑或删除。

#### 2.3.1、关于分析数据和管理接口的内容

| [小试牛刀：](https://developer.matomo.org/guides/reporting-api-tutorial) | 获取前10搜索关键词 |
| :--- | :--- |
| [Matomo（Piwik）接口文档：](https://developer.matomo.org/guides/reporting-api-tutorial) | 这个文档列出了Matomo的所有API，通过它你可了解所有的接口以及接口的规范。 |
| [Matomo（Piwik）原数据接口：](https://developer.matomo.org/api-reference/reporting-api) | 通过它你可以获取更加丰富的数据，包括翻译的标题、列名、报表分类等信息。 |
| [Matomo（Piwik）分段数据接口：](https://developer.matomo.org/api-reference/reporting-api-segmentation) | 通过它你可以获取特定条件的访问数据。这些条件通过Segment进行定义。 |
| [如何调用Matomo（Piwik）API？](https://developer.matomo.org/guides/querying-the-reporting-api) | 有两种方式：一种是REST接口，另一种是直接加在matomo php文件来调用。 |
| [包含静态png图片：](https://developer.matomo.org/api-reference/reporting-api-metadata#static-image-graphs) | 将绘有特定指标或报表的PNG图片包含到应用中非常容易。静态PNG图片及口可被用在任何HTML页面或者桌面/应用应用中。它已经被用于Matomo的应用版中。 |
| [实时分析接口：](https://matomo.org/docs/real-time/#real-time-analytics-api) | 它是由Live插件提供。通过它你可以访问1\)实时访问数2\)特定访问的会话和访问的网页以及所带来的目标转化、自定义指标以及关于访问的其他数据。 |
| [在Matomo服务器的API页面](https://demo.matomo.org/index.php?module=API&action=listAllAPI&idSite=3&period=week&date=today)（首先访问最上面的管理员网址，然后点击左边的API菜单）。 | API页面列出了所有API功能，包括示例网址和 |

#### [2.3.2、追踪接口API](https://matomo.org/docs/tracking-api/)

## 三、数据挖掘

除了现有的数据分析平台，我们也可以获取数据平台的数据，通过数据挖掘，挖掘出更巨细、更有价值的东西。 

### 3.1、数据挖掘的过程主要有：

```text
1）、定义目标

2）、获取数据（常用的手段有通过爬虫采集或者下载-些统计网站发布的数据）

3）、数据探索

4）、数据预处理（数据清洗【去掉脏数据】、数据集成【集中】、数据变换【规范化】、数据规约【精简】)

5）、挖掘建模（分类、聚类、关联、预测）

6）、模型评价与发布
```

[http://www.cnblogs.com/jin-liang/p/9884411.html](http://www.cnblogs.com/jin-liang/p/9884411.html) 

### 3.2、Python数据分析

#### 3.2.1、Python数据分析与挖掘的相关模块

| 1）、numpy | 可以高效处理数据、提供数组支持、很多模块都依赖他，比如 pandas、scipy、matplotlib 都依赖他，所以这个模块是基础。 |
| :--- | :--- |
| 2）、pandas | 主要用于进行数据探索和数据分析。 |

[https://www.cnblogs.com/0n-the-way/p/9480268.html](https://www.cnblogs.com/0n-the-way/p/9480268.html)  
[https://www.jianshu.com/p/883c8d9268a8](https://www.jianshu.com/p/883c8d9268a8) \| \| 3）、matplotlib \| 作图模块，解决可视化问题。 \| \| 4）、scipy \| 主要进行数值计算，同时支持矩阵运算，并提供了很多高等数据处理功能，比如积分、傅里叶变换、微分方程求解等。 \| \| 5）、statsmodels \| 这个模块主要用于统计分析 \| \| 6）、Gensim \| 这个模块主要用于文本挖掘 \| \| 7）、Sklearn、keras \| 前者机器学习，后者深度学习 \| \| 8）、Orange \| 数据挖掘  
常见的数据挖掘算法：[https://www.yuque.com/jingwhale/data/lm9g2k\#b89cf635](https://www.yuque.com/jingwhale/data/lm9g2k#b89cf635)  
  
Orange：[https://orange.biolab.si/](https://orange.biolab.si/) \|

#### 3.2.2、环境的搭建

Anaconda和Jupyter Notebook  
[https://cloud.tencent.com/developer/news/132226](https://cloud.tencent.com/developer/news/132226)

#### 3.2.3、数据导入

```text
-导入Csv文件格式

-导入Excel文件

-导入mysql的数据
可以操作比较流行的三大主流数据库

-导入HTML数据
```

### 3.3、大数据，数据挖掘，机器学习

三者是相辅相成的关系， 有了大数据才能去数据挖掘，数据分析的结果促进了机器学习的发展。机器学习是指一种自动学习的机器，是一种自动化数据分析方法。计算机能够分析数据并自动从该数据构建模型的科学。该机器可以提供数据并适应自身，以进行更精确的预测并相应地进行操作。所谓的数据挖掘，就是利用各种技术与统计方法，将大量的历史数据进行分析、归纳与整合等工作，找出有意义的，有价值的数据，加以运用。

数据挖掘的前提就是有充足的数据为前提，这里的数据是“大量的、不完全的、有噪声的、模糊的、随机的实际应用数据”，信息指的是“隐含的、规律性的、人们事先未知的、但又是潜在有用的。大部分的核心功能的实现，都以计量和统计分析方法作为支撑。主要包括，聚类、估计、预测、关联分组以及分类。

### 3.4、大数据挖掘

spark 与 hadoop  
[http://www.suchso.com/projecteactual/spark-hadoop.html](http://www.suchso.com/projecteactual/spark-hadoop.html)

## 四、数据采集

### 4.1、埋点方案

数据埋点是数据收集的手段之一，毕竟“巧妇 难为无米之炊”，要想进行数据分析必先有数据 。

#### 4.1.1 埋点的技术视角

技术人员谈论埋点一般包括埋点技术、埋点内容以及埋点位置等 。

**理点 技术**  
埋点技术主要分为代码埋点 、 可视化埋点 、 无埋点 三类。

**代码埋点**是指在网 站页面中嵌入一段 JavaScript代码或针对某个点击事件单独编写代码，从而监控访 问网站的用户行为，如 GoogleAnalytics、百度统计、友盟等都采用此类方案。

**可视化埋点**是指，在被监控页面中嵌入代码后，用户在另外一个可以展示被监控页 面状态的界面上，通过点击交互的形式，指定需要监控的事件与页面元素，进而 获得用户行为 。

**无埋点** 则可 以理解为“全 ” 埋点， 即通过代码嵌入的方式智能 地 搜集该页 面 全部元素与用户点 击 行为 。

这样看来，埋点都使用 代 码来完成，只不过方式各不相同，代码埋点应该是写代码埋点，可视化埋点则 是可视化交互埋点，而无埋点更像是代码智能全监控 。

**埋点内容**  
无论采用上述哪一种埋点技术，埋点采集回来的都是 一个一个的事件，简单 来说就是某人、某时与某事组合而成的一次事件。 通过这种细节数据的累计，就 可以获得诸 如 某 件 事有多少人进行、某人在一周内做了多少件事等汇总统 计任 务 。

与业务相结合起来，就可以知道人次或事件发生的次数、两件前后相互连接 的事 件之 间 的转化率\(下单群体与下一步付款人群之间的比值关系，浏览网站人群与 随之登录人群的用户 比值等\)、 留存 比例\(经历了一周或一个月后，还有多少比例 的用户留下来 ， 被广为人知的是同期群分析 CohortAnalysis \)、 时长\(用户在一个 页面停留了多长 时 间\)、内容\(用户看了 l那些内容\)等 。

**埋点位置**  
有了技术也有了实际的内容，接下来需要考虑的就是在什么位置进行埋点 。 我们通常会把做技术的同学分为后端与前端，粗浅理解起来可以这么认为 : 前 端的工作成果用户看得见摸得着，后端的工作成果用户往往用起来却不易察觉 。 于是 做 界面开发的同事离用户更近，故而被称为前端 。

埋点的位置 也 相应 地 可 以分为前端与后端两个地方，上述埋点技术更多的是前端埋点技术，后端埋点 技术可以认为是从数据库或服务器的日志中“扒”数据 。

两者各有优劣 。 前端 可以把用户的细节行为尽揽囊中，且不需要联网进行收集，也正是由于这些特 点，使得收上来的数据不能及时传送给产品分析人员，时有丢失，造成对业务 分析的不及时或不准确 。 后端埋点尽管可以保证及时性与准确性，但是对于用 户的细节行为却一筹莫展，更别提一些如小游戏等应用在非联网状态下的数据 收集了 。

#### 4.1.2 埋点的时机与策略

埋点的技术与位置或许和技术人员相关，可是具体针对什么内容埋点，哪些埋哪些不埋，哪些先埋哪些后埋，埋好点的数据具体有什么用，却是要考虑的事情 。

针对这个问题，往往存在 着两 种观点:

```text
一种观点认为，虽 然不知道数据有什么作用，先收回来再说;

另一种观点则认为，按需收集，小 步快跑，快速迭代，需要多少收多少 。
```

应该说，两种观点各有道理 。

不同的发展时期需要采用不同的数据收集策略 。 如果是初期，小步快跑在理 论上是对的，毕竟这个时期的重要任务是保证 MVP \( Minimum Viable Product， 最 小可行产品 \) 的发布并 且 根据准实时数据动态调整产品的设计与规划 。 而在成熟 时期，企业在市场中的布局已 经较为完备，可 能还涉及总公司与分公司、并购企 业之间的协作问题，若要达到管理的目 的 ，需要以详实的数据为抓手。

要分清楚这两个时期何其难也，它们本身就是孪生的一对。成熟时期中往往 也会有新产品的规划与发布 微观来看似乎只需要按需收集即可，但是宏观来看 又处于成熟时期，需要多多益善 。 因此 ，收集的策略究竟是严格还是宽松就很难 定夺。另外，对于数据收集来说，必定是以结果为导向的，究竟可以发挥什么样 的数据价值应该是收集数据之初考虑的。可是这本身就是一个“先有鸡还是先有 蛋”的问题，也许可以事先定出优化产品设计的目的从而进行按需埋点， 这将很大概率成为一个死锁问题。

解决问题的方案其实很简单，就是“以终为始”。

所谓“以终为始”，就是在收集之前或许得想明白，我们大致能用数据来做什么?确定了目标再进行收集，可以起到事半功倍的效果，同时也更好地有的放矢 。

